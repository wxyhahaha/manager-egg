webpackJsonp([1],{"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},"7dne":function(t,e,a){"use strict";e.a=function(t){return Object(o.a)({url:"manager/goods/list",method:"post",data:t})},e.c=function(t){return Object(o.a)({url:"manager/goods/del",method:"post",data:{id:t}})},e.b=function(t){return console.log(t),Object(o.a)({url:"manager/goods/insert",method:"post",data:t})},e.d=function(t){return Object(o.a)({url:"manager/goods/set",method:"post",data:t})};var o=a("vLgD")},"9bBU":function(t,e,a){a("mClu");var o=a("FeBl").Object;t.exports=function(t,e,a){return o.defineProperty(t,e,a)}},BO1k:function(t,e,a){t.exports={default:a("fxRn"),__esModule:!0}},C4MV:function(t,e,a){t.exports={default:a("9bBU"),__esModule:!0}},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},R4wc:function(t,e,a){var o=a("kM2E");o(o.S+o.F,"Object",{assign:a("To3L")})},To3L:function(t,e,a){"use strict";var o=a("lktj"),i=a("1kS7"),r=a("NpIQ"),s=a("sB3e"),n=a("MU5D"),l=Object.assign;t.exports=!l||a("S82l")(function(){var t={},e={},a=Symbol(),o="abcdefghijklmnopqrst";return t[a]=7,o.split("").forEach(function(t){e[t]=t}),7!=l({},t)[a]||Object.keys(l({},e)).join("")!=o})?function(t,e){for(var a=s(t),l=arguments.length,c=1,d=i.f,u=r.f;l>c;)for(var f,m=n(arguments[c++]),p=d?o(m).concat(d(m)):o(m),v=p.length,g=0;v>g;)u.call(m,f=p[g++])&&(a[f]=m[f]);return a}:l},V3tA:function(t,e,a){a("R4wc"),t.exports=a("FeBl").Object.assign},VSNz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=a("bOdI"),r=a.n(i),s=a("mvHQ"),n=a.n(s),l=a("BO1k"),c=a.n(l),d=a("woOf"),u=a.n(d),f=a("7dne"),m=a("hxa0"),p={data:function(){return{index:0,formDynamic:{items:[{value:void 0,index:0,status:1}]},pics:[],query:{id:void 0},formValidate:{categoryId:void 0,goodsName:void 0,minPrice:void 0,orignPrice:void 0,stores:void 0,isSale:void 0,isBest:void 0,isNew:void 0,isRecom:void 0,goodsDesc:void 0,goodsImg:void 0},loading:!1,ruleValidate:{categoryId:[{required:!0,message:"分类名称不能为空",trigger:"blur"}],goodsName:[{required:!0,message:"分类名称不能为空",trigger:"blur"}]},baseUrl:"http://localhost:7001/public/img/",imgUrl:"",categoryList:[],trueOrfalse:[{key:"是",value:1},{key:"否",value:0}]}},mounted:function(){var t=this.$router.currentRoute.query;this.query=t,console.log(t),console.log("执行mounted"),this.fetchData(),this.ftchCategory()},methods:(o={handleSubmit:function(t,e){var a=this;this.$refs[t].validate(function(t){t?(a.loading=!0,e()):a.$Notice.error({title:"失败!"})})},handleReset:function(t){this.$refs[t].resetFields()},addData:function(t){var e=this;u()(this.formValidate);var a=this.checkAndAssign();u()(this.formValidate,{goodsPics:a}),this.handleSubmit(t,function(){Object(f.b)(e.formValidate).then(function(t){console.log(t),0==t.data.code&&(e.loading=!1,setTimeout(function(){e.back()},800),e.$Notice.success({title:"添加成功!"}))})})},upDateData:function(t){var e=this,a=this.query,o=this.checkAndAssign();u()(a,this.formValidate,{goodsPics:o}),this.handleSubmit(t,function(){Object(f.d)(a).then(function(t){0==t.data.code&&(console.log(t),e.loading=!1,setTimeout(function(){e.back()},800),e.$Notice.success({title:"更新成功!"}))})})},fetchData:function(){var t=this,e=this.query.id;console.log("idididi",e);var a=!0;e||(a=!1),a&&Object(f.a)({id:e,page:1,pageSize:10}).then(function(e){if(0==e.data.code){console.log(e);var a=e.data.result.data[0],o=a.categoryId,i=a.goodsName,r=a.goodsPics,s=a.minPrice,n=a.orignPrice,l=a.stores,c=a.isSale,d=a.isNew,u=a.isRecom,f=a.goodsDesc,m=a.goodsImg;t.formValidate={categoryId:o,goodsName:i,minPrice:s,orignPrice:n,stores:l,isSale:c,isNew:d,isRecom:u,goodsDesc:f,goodsImg:m},r&&(t.pics=JSON.parse(r)),t.formatPics()}})},back:function(){this.$router.back(-1)},ftchCategory:function(){var t=this;Object(m.a)({page:1,pageSize:10}).then(function(e){if(0==e.data.code){console.log(e.data.result.data);var a=e.data.result.data,o=[],i=!0,r=!1,s=void 0;try{for(var n,l=c()(a);!(i=(n=l.next()).done);i=!0){var d=n.value,u=d.categoryId,f=d.catName;o.push({categoryId:u,catName:f})}}catch(t){r=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw s}}t.categoryList=o}}).catch(function(t){})},success:function(t,e,a){console.log(t.data),this.imgUrl=this.baseUrl+t.data},imgInputFocus:function(){this.$Notice.info({title:"提示",desc:"点击上传文件,生成链接,用于输入图片链接哦"})}},r()(o,"handleReset",function(t){this.$refs[t].resetFields()}),r()(o,"handleAdd",function(){this.index++,this.formDynamic.items.push({value:void 0,index:this.index,status:1})}),r()(o,"handleRemove",function(t){this.formDynamic.items[t].status=0}),r()(o,"checkAndAssign",function(){var t=[];return this.formDynamic.items.forEach(function(e){if(1==e.status&&void 0!=e.value){var a=e.value;t.push(a)}}),n()(t)}),r()(o,"formatPics",function(){for(var t in console.log(this.pics),this.formDynamic.items=[],this.index=0,this.pics)this.formDynamic.items.push({value:this.pics[t],index:this.index++,status:1})}),o)},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"分类名称",prop:"categoryId"}},[a("Select",{model:{value:t.formValidate.categoryId,callback:function(e){t.$set(t.formValidate,"categoryId",e)},expression:"formValidate.categoryId"}},t._l(t.categoryList,function(e){return a("Option",{key:e.categoryId,attrs:{value:e.categoryId}},[t._v(t._s(e.catName))])}),1)],1)],1),t._v(" "),a("Col",{attrs:{span:"10",offset:"2"}},[a("FormItem",{attrs:{label:"商品名称",prop:"goodsName"}},[a("Input",{attrs:{placeholder:"输入商品名称"},model:{value:t.formValidate.goodsName,callback:function(e){t.$set(t.formValidate,"goodsName",e)},expression:"formValidate.goodsName"}})],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"链接生成"}},[a("Upload",{attrs:{action:"http://47.100.57.39:7001/manager/upload","on-success":t.success}},[a("Button",{staticStyle:{"margin-right":"40px"},attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传文件")]),t._v(t._s(t.imgUrl)+"\n        ")],1)],1),t._v(" "),a("FormItem",{attrs:{label:"商品封面",prop:"goodsImg"}},[a("Input",{attrs:{placeholder:"请输入链接"},on:{"on-focus":t.imgInputFocus},model:{value:t.formValidate.goodsImg,callback:function(e){t.$set(t.formValidate,"goodsImg",e)},expression:"formValidate.goodsImg"}})],1),t._v(" "),a("FormItem",{attrs:{label:"商品图片   "}},t._l(t.formDynamic.items,function(e,o){return e.status?a("Row",{key:o,staticStyle:{"margin-bottom":"10px"}},[a("Col",{attrs:{span:"18"}},[a("Input",{attrs:{type:"text",placeholder:"输入链接"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1),t._v(" "),a("Col",{attrs:{span:"4",offset:"1"}},[a("Button",{attrs:{type:"error"},on:{click:function(e){return t.handleRemove(o)}}},[t._v("删除")])],1)],1):t._e()}),1),t._v(" "),a("FormItem",[a("Row",[a("Col",{attrs:{span:"12"}},[a("Button",{attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:t.handleAdd}},[t._v("Add item")])],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"最低价格",prop:"minPrice"}},[a("Input",{attrs:{placeholder:"请输入最低价格"},model:{value:t.formValidate.minPrice,callback:function(e){t.$set(t.formValidate,"minPrice",e)},expression:"formValidate.minPrice"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"原价",prop:"orignPrice"}},[a("Input",{attrs:{placeholder:"请输入原价"},model:{value:t.formValidate.orignPrice,callback:function(e){t.$set(t.formValidate,"orignPrice",e)},expression:"formValidate.orignPrice"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"库存量",prop:"stores"}},[a("Input",{attrs:{placeholder:"请输入库存量"},model:{value:t.formValidate.stores,callback:function(e){t.$set(t.formValidate,"stores",e)},expression:"formValidate.stores"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"是否上架",prop:"isSale"}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.formValidate.isSale,callback:function(e){t.$set(t.formValidate,"isSale",e)},expression:"formValidate.isSale"}},t._l(t.trueOrfalse,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.key))])}),1)],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"是否精品",prop:"isBest"}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.formValidate.isBest,callback:function(e){t.$set(t.formValidate,"isBest",e)},expression:"formValidate.isBest"}},t._l(t.trueOrfalse,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.key))])}),1)],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"是否新品",prop:"isNew"}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.formValidate.isNew,callback:function(e){t.$set(t.formValidate,"isNew",e)},expression:"formValidate.isNew"}},t._l(t.trueOrfalse,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.key))])}),1)],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"是否推荐",prop:"isRecom"}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.formValidate.isRecom,callback:function(e){t.$set(t.formValidate,"isRecom",e)},expression:"formValidate.isRecom"}},t._l(t.trueOrfalse,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.key))])}),1)],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"商品描述",prop:"goodsDesc"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"商品描述..."},model:{value:t.formValidate.goodsDesc,callback:function(e){t.$set(t.formValidate,"goodsDesc",e)},expression:"formValidate.goodsDesc"}})],1),t._v(" "),a("FormItem",[t.query.id?a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.upDateData("formValidate")}}},[t._v("修改")]):a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.addData("formValidate")}}},[t._v("提交")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("重置")])],1)],1)},staticRenderFns:[]};var g=a("VU/8")(p,v,!1,function(t){a("XYmd")},null,null);e.default=g.exports},XYmd:function(t,e){},bOdI:function(t,e,a){"use strict";e.__esModule=!0;var o,i=a("C4MV"),r=(o=i)&&o.__esModule?o:{default:o};e.default=function(t,e,a){return e in t?(0,r.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},fxRn:function(t,e,a){a("+tPU"),a("zQR9"),t.exports=a("g8Ux")},g8Ux:function(t,e,a){var o=a("77Pl"),i=a("3fs2");t.exports=a("FeBl").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return o(e.call(t))}},mClu:function(t,e,a){var o=a("kM2E");o(o.S+o.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},mvHQ:function(t,e,a){t.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(t,e,a){var o=a("FeBl"),i=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},woOf:function(t,e,a){t.exports={default:a("V3tA"),__esModule:!0}}});
//# sourceMappingURL=1.37d61293b4965eeb0924.js.map