webpackJsonp([9],{Jm9X:function(e,t){},jT7l:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("HRDH");var o=n("q2Iq"),r={data:function(){return{formInline:{username:void 0,password:void 0,imgcode:void 0},loading:!1,imgBase64:"",ruleInline:{username:[{required:!0,message:"请输入用户",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],imgcode:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},mounted:function(){this.massage(),this.getCaptcha()},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.loading=!0,t.login().then(function(e){t.loading=!1,t.getCaptcha()})):t.$Message.error("失败!")})},getCaptcha:function(){var e=this;this.$axios.post("http://localhost:7001/manager/admin/getCaptcha").then(function(t){0==t.data.code&&(e.imgBase64=t.data.data)})},enter:function(e){13==e.keyCode&&this.handleSubmit("formInline")},login:function(){var e=this;return this.$axios.post("http://localhost:7001/manager/admin/login",this.formInline).then(function(t){if(console.log(t),0==t.data.code){e.$Message.success("登录成功");var n=t.data.data.newtoken;console.log("login",n),Object(o.b)(n),e.$router.push("/")}404==t.data.code&&(e.$Message.error("密码错误"),e.formInline.password="",e.formInline.imgcode=""),300==t.data.code&&(e.$Message.error("验证码错误"),e.formInline.imgcode=""),500==t.data.code&&(e.$Message.error("用户不存在"),e.formInline.username="")})},massage:function(){}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loginForm"},[n("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[n("FormItem",{attrs:{prop:"username"}},[n("Input",{attrs:{type:"text",placeholder:"用户名",size:"large"},model:{value:e.formInline.username,callback:function(t){e.$set(e.formInline,"username",t)},expression:"formInline.username"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),n("FormItem",{attrs:{prop:"password"}},[n("Input",{attrs:{type:"password",placeholder:"密码",size:"large"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),e._v(" "),n("FormItem",{attrs:{prop:"imgcode"}},[n("Row",{attrs:{type:"flex",align:"top"}},[n("Col",{attrs:{span:"4"}},[n("Input",{attrs:{type:"text",placeholder:"验证码"},on:{"on-enter":e.enter},model:{value:e.formInline.imgcode,callback:function(t){e.$set(e.formInline,"imgcode",t)},expression:"formInline.imgcode"}})],1),e._v(" "),n("Col",{attrs:{span:"5",offset:"1"}},[n("img",{attrs:{src:"data:image/png;base64,"+e.imgBase64,alt:""}})]),e._v(" "),n("Col",{attrs:{span:"10",offset:"4"}},[n("Button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleSubmit("formInline")}}},[e._v("登录")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var s=n("VU/8")(r,a,!1,function(e){n("Jm9X")},null,null);t.default=s.exports}});
//# sourceMappingURL=9.73c0c77fc687e91774b0.js.map